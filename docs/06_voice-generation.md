# 06. 音声生成（Step④）

## 概要

台本をAIがナレーションとして読み上げる音声を生成する。

## 完了条件

- 台本からナレーション音声が生成される
- 男性/女性の声を選択できる
- 音声をプレビュー再生できる
- 再生成ができる

## 技術仕様

| 項目 | 内容 |
|------|------|
| 生成API | Google Gemini 2.5 Flash TTS |
| 声の種類 | 男性 / 女性 |
| 読み上げ速度 | 固定（MVP） |
| 出力形式 | mp3 または wav |

## タスク

- [x] TTS API連携（Google Gemini 2.5 Flash TTS）
- [x] 声の種類選択UI（男性/女性）
- [x] 音声生成処理
- [x] 音声プレビュー再生機能
- [x] 再生成機能
- [x] 生成失敗時のエラーハンドリング
- [ ] 音声ファイルのSupabase Storage保存
- [x] 音声の長さ（秒数）表示

## UI設計

```
┌────────────────────────────────────┐
│ 声の種類を選択                      │
│ ○ 男性  ● 女性                     │
├────────────────────────────────────┤
│ [▶ 再生] [再生成]                  │
│                                    │
│ 音声の長さ: 14.5秒                 │
└────────────────────────────────────┘
```

## データ構造

```typescript
interface VoiceAudio {
  id: string
  url: string
  voiceType: 'male' | 'female'
  duration: number // 秒
  createdAt: Date
}
```

## 将来対応（MVP外）

- 読み上げ速度の調整
- 読み方の辞書登録
