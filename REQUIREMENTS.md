# ClipTrailer 要件定義書

**Version 1.0（MVP）**  
**作成日：2026 年 1 月 10 日**

---

## 目次

1. [サービス概要](#1-サービス概要)
2. [機能要件](#2-機能要件)
3. [非機能要件](#3-非機能要件)
4. [技術仕様](#4-技術仕様)
5. [UI/UX 仕様](#5-uiux仕様)
6. [料金体系](#6-料金体系)
7. [開発計画](#7-開発計画)
8. [将来の拡張](#8-将来の拡張フェーズ2以降)
9. [用語集](#9-用語集)

---

## 1. サービス概要

### 1.1 サービス名

**ClipTrailer**（クリップトレーラー）

### 1.2 コンセプト

note 記事の URL を入力するだけで、TikTok/YouTube Shorts/Instagram Reels 向けのショート動画（15 秒）を自動生成する Web サービス。

動画生成 AI に頼らず、「台本 → 静止画 → 音声 →BGM→ 合成」という安定した構成で動画を組み立てる設計。

### 1.3 解決する課題

- note 記事を書いても読者に届きにくい
- TikTok 等のショート動画は集客に有効だが、動画制作のハードルが高い
- CapCut、Premiere 等の動画編集ソフトの学習コストが高い
- 台本作成、画像作成、ナレーション、BGM の組み合わせが面倒

### 1.4 ターゲットユーザー

| 項目             | 内容                                                  |
| ---------------- | ----------------------------------------------------- |
| メインターゲット | note で発信している個人（副業・体験談・エッセイ系）   |
| IT リテラシー    | 動画編集は未経験だが、note は書ける程度               |
| ニーズ           | 記事を多くの人に読んでもらいたい、TikTok で集客したい |

---

## 2. 機能要件

### 2.1 全体フロー（6 ステップ）

| Step | 機能                | 概要                                                 |
| ---- | ------------------- | ---------------------------------------------------- |
| ①    | URL 入力 / 記事取得 | note.com の URL を入力、または文章を直接貼り付け     |
| ②    | 台本生成            | AI が 15 秒台本を自動生成（編集可能）                |
| ③    | 画像生成            | AI が 4 枚の画像を自動生成（再生成・差し替え可能）   |
| ④    | 音声生成            | AI がナレーションを自動生成（男声/女声選択）         |
| ⑤    | BGM 選択            | AI が 3 曲候補を提案、ユーザーが選択                 |
| ⑥    | 動画書き出し        | mp4 + サムネイル + キャプション + ハッシュタグを生成 |

### 2.2 Step① URL 入力 / 記事取得

| 項目           | 仕様                                                                   |
| -------------- | ---------------------------------------------------------------------- |
| 対応 URL       | note.com のみ（MVP）                                                   |
| バリデーション | note.com ドメインチェック                                              |
| 代替入力       | 文章直接貼り付けに対応（URL 取得失敗時の代替手段）                     |
| エラー時       | 「URL が間違っているか、非公開になっていないか確認してください」を表示 |

### 2.3 Step② 台本生成

| 項目         | 仕様                                                |
| ------------ | --------------------------------------------------- |
| テンプレート | 失敗談 / 成功談 / 開発ストーリー / How-to の 4 種類 |
| 構成         | フック（つかみ）→ ベネフィット → 結論 → CTA         |
| フック提案   | AI が 3 つのフック案を提案 → ユーザーが選択         |
| 編集機能     | 自動生成後、ユーザーが自由に編集可能                |

### 2.4 Step③ 画像生成

| 項目     | 仕様                                           |
| -------- | ---------------------------------------------- |
| 枚数     | 4 枚固定（将来的に選択可能にして課金対象）     |
| 生成 API | NanoBananaPro（gemini-3-pro-image-preview）    |
| 再生成   | 何度でも再生成可能（MVP 段階では回数制限なし） |
| 差し替え | ユーザーの画像をアップロードして差し替え可能   |

### 2.5 Step④ 音声生成

| 項目         | 仕様                        |
| ------------ | --------------------------- |
| 生成 API     | Google Gemini 2.5 Flash TTS |
| 声の種類     | 男性 / 女性 を選択可能      |
| 読み上げ速度 | 固定（将来対応）            |
| 辞書登録     | なし（将来対応）            |

### 2.6 Step⑤ BGM 選択

| 項目     | 仕様                                                  |
| -------- | ----------------------------------------------------- |
| 提供元   | Mubert API                                            |
| 選び方   | AI がテーマに合わせて 3 曲候補を提案 → ユーザーが選択 |
| BGM なし | 選択可能                                              |
| 音量     | 固定（自動設定、ナレーションの邪魔にならないレベル）  |

### 2.7 Step⑥ 動画書き出し

| 項目         | 仕様                              |
| ------------ | --------------------------------- |
| 出力形式     | mp4                               |
| 解像度       | 1080×1920（縦動画）               |
| 動画の尺     | 15 秒固定（MVP）                  |
| 字幕         | ON/OFF 選択可能（動画に焼き込み） |
| サムネイル   | 1 枚目の画像を自動生成            |
| キャプション | TikTok 用投稿文を自動生成         |
| ハッシュタグ | 自動生成                          |
| ダウンロード | ブラウザからダウンロード          |

---

## 3. 非機能要件

### 3.1 認証

| 項目     | 仕様                                   |
| -------- | -------------------------------------- |
| 認証方式 | Google ログイン（Supabase Auth OAuth） |
| その他   | メール/パスワード認証は将来対応        |

### 3.2 データ保存

| 項目             | 仕様                             |
| ---------------- | -------------------------------- |
| プロジェクト一覧 | マイページで過去の動画を一覧表示 |
| 動画の保存期間   | 7 日後に自動削除                 |
| 途中保存         | なし（離脱時に注意書きを表示）   |
| 複製機能         | なし（MVP）                      |

### 3.3 エラーハンドリング

| エラー種別       | 対応                                          |
| ---------------- | --------------------------------------------- |
| 画像生成失敗     | ユーザーに「再生成」ボタンを表示              |
| 音声生成失敗     | ユーザーに「再生成」ボタンを表示              |
| 動画書き出し失敗 | ユーザーに「再生成」ボタンを表示              |
| 記事取得失敗     | エラーメッセージ表示 + 文章直接貼り付けを案内 |

### 3.4 対応プラットフォーム

- TikTok
- YouTube Shorts
- Instagram Reels

※解像度 1080×1920 で 3 プラットフォーム共通対応

---

## 4. 技術仕様

### 4.1 技術スタック

| レイヤー       | 技術                          |
| -------------- | ----------------------------- |
| フロントエンド | Next.js（App Router）         |
| UI ライブラリ  | shadcn/ui                     |
| バックエンド   | Supabase（認証・DB・Storage） |
| 動画合成       | FFmpeg（サーバーサイド）      |
| ホスティング   | Vercel または Cloudflare      |

### 4.2 外部 API

| 用途     | サービス/API                                |
| -------- | ------------------------------------------- |
| 画像生成 | NanoBananaPro（gemini-3-pro-image-preview） |
| 音声生成 | Google Gemini 2.5 Flash TTS                 |
| BGM 生成 | Mubert API                                  |

### 4.3 アーキテクチャ（重要）

動画生成は処理時間が長く、Vercel/Cloudflare の実行時間制限（60 秒程度）を超える可能性があるため、**非同期処理**で実装する。

| 処理                     | 実行場所                                           |
| ------------------------ | -------------------------------------------------- |
| フロントエンド・API 受付 | Vercel / Cloudflare                                |
| 動画生成（重い処理）     | 別サービス（Modal / Railway / Render 等）          |
| ジョブキュー             | Inngest / Trigger.dev / Supabase Database Webhooks |

**処理フロー：**

```
ユーザー → Vercel（受付）→ ジョブキュー → 動画処理サーバー → 完了通知
```

---

## 5. UI/UX 仕様

### 5.1 デザイン方針

| 項目              | 仕様                                                   |
| ----------------- | ------------------------------------------------------ |
| テーマ            | 明るめダーク系（柔らかいダークグレー、真っ黒ではない） |
| 参考              | Notion や Discord のダークモードのような雰囲気         |
| UI コンポーネント | shadcn/ui                                              |

### 5.2 レスポンシブ対応

| フェーズ | 対応                          |
| -------- | ----------------------------- |
| MVP      | PC 優先（スマホは考慮しない） |
| 将来     | スマホ対応を検討              |

### 5.3 主要画面

| 画面         | 概要                                                                   |
| ------------ | ---------------------------------------------------------------------- |
| ログイン画面 | Google ログインボタン                                                  |
| マイページ   | 過去のプロジェクト一覧、新規作成ボタン                                 |
| 動画作成画面 | 6 ステップのワークスペース（左：ステップ、中央：編集、右：プレビュー） |
| 完了画面     | ダウンロードボタン、キャプション・ハッシュタグのコピー                 |

---

## 6. 料金体系

### 6.1 MVP 段階

**無料**（自分自身でテスト・検証するため）

### 6.2 将来的な課金モデル（イメージ）

| 項目     | 内容                                                          |
| -------- | ------------------------------------------------------------- |
| 課金方式 | 従量課金（1 本あたり ○ 円）                                   |
| 差別化   | 画像生成のグレードで価格差（例：nanobanana / nanobanana pro） |
| 画像枚数 | 枚数選択可能にして課金対象にする                              |

---

## 7. 開発計画

### 7.1 開発方針

- Claude Code でバイブコーディング
- 1 ステップずつ動作確認しながら進める
- リリース目標時期：特に決めない（できたら）

### 7.2 開発順序

| 順番 | 内容                | 完了条件                            |
| ---- | ------------------- | ----------------------------------- |
| 1    | URL 入力 → 台本生成 | 記事を取得し、台本が表示される      |
| 2    | 画像生成            | 4 枚の画像が生成される              |
| 3    | 音声生成            | ナレーションが再生できる            |
| 4    | BGM 選択            | BGM を選択できる                    |
| 5    | 動画書き出し        | mp4 がダウンロードできる            |
| 6    | 仕上げ              | UI 調整、エラーハンドリング、テスト |

---

## 8. 将来の拡張（フェーズ 2 以降）

- 動画の尺選択（22 秒、30 秒）
- 画像枚数の選択（5 枚、6 枚）
- 対応 URL 拡大（Zenn、はてなブログ等）
- 読み上げ速度の調整
- 読み方の辞書登録
- スマホ対応
- 従量課金システムの実装
- プロジェクト複製機能
- 途中保存機能
- 英語対応

---

## 9. 用語集

| 用語               | 説明                                                                       |
| ------------------ | -------------------------------------------------------------------------- |
| フック             | 動画の冒頭（1〜2 秒）で視聴者の注意を引く「つかみ」のこと                  |
| CTA                | Call To Action。視聴者に行動を促す呼びかけ（例：コメントで教えてください） |
| バイブコーディング | AI との対話を通じて直感的にコードを生成する開発手法                        |
| MVP                | Minimum Viable Product。必要最小限の機能を持つ製品                         |

---

## 更新履歴

| 日付       | バージョン | 内容     |
| ---------- | ---------- | -------- |
| 2026/01/10 | 1.0        | 初版作成 |
